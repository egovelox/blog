<!doctype html>
<html lang ="en">
  <head>
    
    <meta charset='utf-8'>
    <meta description="traditional post">
    <title>Scripting shell sous UNIX</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/modern-normalize/0.5.0/modern-normalize.min.css">
    <link rel="stylesheet" href="./styles/main.css">

    
  </head>
  <body>
  <nav>
    <ul id="navbar">
      <li class="nav-item">
      <svg id = "brand" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 245 245"><defs><style>.cls-1{font-size:41px;fill:#fff;font-family:AmericanTypewriter, American Typewriter;}.cls-2{letter-spacing:-0.03em;}</style></defs><title>egovelox</title><g id="Calque_2" data-name="Calque 2"><g id="Calque_1-2" data-name="Calque 1"><rect width="245" height="245"/><text class="cls-1" transform="translate(57.7 130)">EGO<tspan x="0" y="49.2">VEL</tspan><tspan class="cls-2" x="83.56" y="49.2">O</tspan><tspan x="109.02" y="49.2">X</tspan></text></g></g></svg>
      </li>

      <li class="nav-item">
        <a href="./index.html">&#9783; Articles</a>
      </li>
      <li class="nav-item">
        <a href="./about.html">About</a>
      </li>
      <li class="nav-item">
        <a href="./index.html">Nugae</a>
      </li>
    </ul>
  </nav>
    
  <article>
    <header>
      <h1>Scripting shell sous UNIX</h1>
    </header>
    <div class="markdown-body">
      <p>L'écriture d'un script shell sous UNIX passe invariablement par quelques étapes indispensables. Cet article permettra de les rappeler clairement.</p>
<h3 id="mise-en-place">Mise en place</h3>
<p>Créons un répertoire /bin dans notre dossier d'utilisateur, et le fichier dans lequel nous écrirons notre script:</p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> mkdir <span class="hljs-variable">$HOME</span>/bin</span>
<span class="hljs-meta">$</span><span class="bash"> touch <span class="hljs-variable">$HOME</span>/bin/monScript.sh</span></code></pre>
<h3 id="au-commencement-était-le-shebang">Au commencement était le SHEBANG</h3>
<p>Le SHEBANG permet d'indiquer le shell que l'on choisit pour exécuter notre script.
Nous indiquons ici que l'on choisit le shell "bash".</p>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span></code></pre>
<h3 id="le-contenu-du-script">Le contenu du script</h3>
<p>Evidemment notre script aura un contenu, mais il importe peu ici. Nous plaçons simplement un 'echo':</p>
<pre><code class="hljs language-bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Le script a bien été exécuté"</span></code></pre>
<h3 id="les-droits-dexécution">Les droits d'exécution</h3>
<p>Sous UNIX, un script bash ne pourra être exécuté par l'utilisateur, que si ce dernier possède bien les droits d'exécution sur le script. </p>
<p>Donnons-nous donc les droits d'exécution sur notre script, en envoyant dans notre console (pas dans le script lui-même) la commande suivante :</p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> sudo chmod 755 /chemin/vers/monScript.sh</span></code></pre>
<h3 id="le-lancement-du-script">Le lancement du script</h3>
<p>Soit le lancer depuis le repértoire où il se trouve:</p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> /chemin/vers/monScript.sh &#x26;&#x26; ./monScript.sh</span></code></pre>
<p>Soit le lancer sans considération du répertoire; nous devrons alors auparavant inclure le répertoire du script dans notre variable d'environnement PATH : </p>
<pre><code class="hljs language-shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">export</span> PATH=PATH:<span class="hljs-variable">$HOME</span>/bin</span>
<span class="hljs-meta">$</span><span class="bash"> monScript.sh</span></code></pre>

    </div>
  </article>

  <script src="//cdnjs.cloudfare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <script>
    window
      .hljs
      .initHighlightingOnLoad();
  </script>

    <footer id="footer">&#128736;<span id="footerSignature">Egovelox</span> Jan 2020 with &#128420;</footer>
  </body>
</html>